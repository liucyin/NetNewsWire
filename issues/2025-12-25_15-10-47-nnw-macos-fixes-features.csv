id,priority,phase,area,title,description,acceptance_criteria,test_mcp,review_initial_requirements,review_regression_requirements,dev_state,review_initial_state,review_regression_state,git_state,owner,refs,notes
"NNW-010","P1","1","both","建立复现基线与样例集","为缩略图、悬停翻译重试、启动刷新、图片查看器、加载优化、快捷键自定义建立可重复的样例与验证步骤，作为后续开发与验收基线。","在 plan 中追加“Repro Samples”小节覆盖 6 项需求点；每项至少 1 个可复现样例（含 feed 名称/文章链接或 ID、前置条件、操作步骤、期望结果），并能在本机按文档复现。","AUTOE2E","样例需包含成功与失败路径；记录必要依赖（网络、AI provider 配置等）；样例描述需可在 5 分钟内复现并给出明确期望。","后续每个 Issue 交付时更新样例验证结果（通过/失败原因）并保持样例仍可复现；如样例变更需同步更新文档与 refs。","未开始","未开始","未开始","未提交","","plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:24;DEVELOPMENT_WORKFLOW.md:5",""
"NNW-010","P1","1","both","建立复现基线与样例集","为缩略图、悬停翻译重试、启动刷新、图片查看器、加载优化、快捷键自定义建立可重复的样例与验证步骤，作为后续开发与验收基线。","在 plan 中追加“Repro Samples”小节覆盖 6 项需求点；每项至少 1 个可复现样例（含 feed 名称/文章链接或 ID、前置条件、操作步骤、期望结果），并能在本机按文档复现。","AUTOE2E","样例需包含成功与失败路径；记录必要依赖（网络、AI provider 配置等）；样例描述需可在 5 分钟内复现并给出明确期望。","后续每个 Issue 交付时更新样例验证结果（通过/失败原因）并保持样例仍可复现；如样例变更需同步更新文档与 refs。","已完成","已完成","已完成","已提交","","plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:24;plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:30;DEVELOPMENT_WORKFLOW.md:5","picked_reason:Phase 1 样例作为后续 P0/P1 验收前置，先补齐可复现基线以降低后续开发/回归成本;done_at:2025-12-25;acceptance:Repro Samples 覆盖 6 项（成功/失败路径+依赖+步骤+期望）;validation_limited:docs-only（无代码变更），未跑 XcodebuildMcp build/Tests;manual_test:打开 plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md#L30 检查 6 条样例完整;evidence:新增 Repro Samples 小节并写明维护规则;risk:low 文档变更"
"NNW-020","P0","2","both","修复 Timeline 缩略图缺失（imageLink 兜底提取）","改进 Article.imageLink 的有效性判断与 HTML 图片 URL 提取，确保 Timeline 在文章正文含图片时能显示缩略图，不改变现有 TimelineCellData -> ImageDownloader 链路。","开启 Timeline 缩略图后，Phase 1 样例文章在 Timeline 最终显示非空缩略图；Article.imageLink 对空字符串/无效 URL 返回 nil 并继续 fallback；至少支持 src、data-src/data-original、srcset 首 URL、单引号属性，并过滤 data: 占位图；XcodebuildMcp（macOS）构建通过；新增至少 1 个 NetNewsWireTests 单测覆盖上述 HTML 模式。","AUTOE2E","解析逻辑避免引入重型 HTML 解析与额外依赖；过滤 tracking pixel/广告图策略明确；Shared 代码兼容 macOS 15.6 且不破坏 iOS 侧编译。","回归：Timeline 滚动不明显掉帧；无图/有图/多图文章行为正确；缓存清理后可重新下载；通知缩略图与其他 imageLink 使用点不退化。","未开始","未开始","未开始","未提交","","plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:30;Shared/Extensions/ArticleUtilities.swift:73;Mac/MainWindow/Timeline/Cell/TimelineCellData.swift:62;Mac/MainWindow/Timeline/Cell/TimelineTableCellView.swift:319;Shared/Images/ImageDownloader.swift:18",""
"NNW-020","P0","2","both","修复 Timeline 缩略图缺失（imageLink 兜底提取）","改进 Article.imageLink 的有效性判断与 HTML 图片 URL 提取，确保 Timeline 在文章正文含图片时能显示缩略图，不改变现有 TimelineCellData -> ImageDownloader 链路。","开启 Timeline 缩略图后，Phase 1 样例文章在 Timeline 最终显示非空缩略图；Article.imageLink 对空字符串/无效 URL 返回 nil 并继续 fallback；至少支持 src、data-src/data-original、srcset 首 URL、单引号属性，并过滤 data: 占位图；XcodebuildMcp（macOS）构建通过；新增至少 1 个 NetNewsWireTests 单测覆盖上述 HTML 模式。","AUTOE2E","解析逻辑避免引入重型 HTML 解析与额外依赖；过滤 tracking pixel/广告图策略明确；Shared 代码兼容 macOS 15.6 且不破坏 iOS 侧编译。","回归：Timeline 滚动不明显掉帧；无图/有图/多图文章行为正确；缓存清理后可重新下载；通知缩略图与其他 imageLink 使用点不退化。","已完成","已完成","已完成","已提交","","plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:30;Shared/Extensions/ArticleUtilities.swift:73;Mac/MainWindow/Timeline/Cell/TimelineCellData.swift:62;Mac/MainWindow/Timeline/Cell/TimelineTableCellView.swift:319;Shared/Images/ImageDownloader.swift:18;Tests/NetNewsWireTests/ArticleImageLinkTests.swift:1","picked_reason:P0 且为后续图片 viewer/加载优化的基础能力，先修复 imageLink 兜底提取并补齐单测;done_at:2025-12-25;acceptance:imageLink 空/无效 URL 继续 HTML fallback，支持 src/data-src/data-original/srcset/单引号，过滤 data: 占位图，跳过疑似 tracking pixel（≤2x2 或 pixel.gif/png）;build:XcodebuildMcp macOS build succeeded;validation_limited:XCTest 未能运行（NetNewsWireTests 需要开发团队签名；尝试关闭签名后 AccountTests 存在 actor 编译错误）;manual_test:按 plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md#L34 样例开启 Timeline 缩略图并验证显示非空缩略图；并用含 data-src/srcset/单引号 img 的文章复测;evidence:新增 ArticleImageLinkTests 覆盖提取模式;risk:medium 影响缩略图提取路径，需手工回归通知缩略图/无图文章"
"NNW-030","P0","3","frontend","修复 Hover 翻译失败后可重试","调整 hover translation 注入 JS 与错误状态展示：翻译失败后按 modifier 可重新发起翻译请求，而不是只做展开/折叠。","制造一次 Hover 翻译失败后（页面显示 error），再次按 modifier（如 Control 或用户设置的键）会重新触发翻译请求：先进入 loading，再成功后替换为翻译文本；成功状态下 modifier 仍保持原有展开/折叠；无需刷新页面即可重试；XcodebuildMcp（macOS）构建通过。","AUTOFRONTEND","JS 状态机需区分 error/loading/success 且无全局副作用；避免对同一段落无限重复发请求（必要时去重/节流）；不影响 link hover/scroll handler。","回归：启用/禁用 Hover Translation 行为正确；切换文章/滚动/移动鼠标时 lastHoveredNode 处理正确；失败→重试→成功与多次 toggle 全覆盖。","未开始","未开始","未开始","未提交","","plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:37;Mac/MainWindow/Detail/DetailWebViewController.swift:640;Mac/MainWindow/Detail/DetailViewController.swift:368;Mac/MainWindow/Detail/DetailViewController.swift:75",""
"NNW-040","P1","4","both","新增“启动后自动刷新”开关（Settings > General）","在 Settings > General 增加“启动后自动刷新”选项，控制 AppDelegate 启动时是否触发 refresh/sync；默认行为与历史一致。","Preferences 的 General 面板出现可切换 checkbox；默认值与当前行为一致（默认开启）；关闭后冷启动不自动触发 refresh（不调用 refreshTimer.timedRefresh/ArticleStatusSyncTimer.shared.timedRefresh）；打开后恢复；设置持久化（重启后仍生效）；XcodebuildMcp（macOS）构建通过且相关 XCTest 通过。","AUTOE2E","明确与 suppressSyncOnLaunch 的优先级/迁移策略并在代码中体现；避免影响窗口恢复/首屏交互；不引入主线程阻塞。","回归：定时刷新仍按 refreshInterval 工作；手动 Refresh 菜单/toolbar 正常；多账号/无账号场景无崩溃；首次运行导入默认 feeds 流程不受影响。","未开始","未开始","未开始","未提交","","plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:43;Mac/AppDefaults.swift:24;Mac/AppDelegate.swift:217;Mac/Preferences/General/GeneralPrefencesViewController.swift:15",""
"NNW-050","P1","5","both","图片查看器：点击图片打开/关闭（链路打通）","为正文图片点击建立 Web->Native 通路，提供 overlay 图片查看器（可关闭/降级），并为可点击图片设置 pointing-hand 光标。","在详情页点击正文图片后打开 overlay viewer（展示同一图片 URL）；支持右上角 X 与 ESC 关闭；打开/关闭动画无闪白且无明显卡顿；图片加载失败时降级为在浏览器打开图片 URL；Web 侧图片 hover 显示 pointing-hand；XcodebuildMcp（macOS）构建通过。","AUTOFRONTEND","WebKit message handler 命名稳定且不与现有消息冲突；JS 注入不影响 link hover/scroll；viewer 采用 layer-backed 并避免主线程同步解码。","回归：普通链接点击仍走 openInBrowser；regular/search 两种 detail 模式均可打开 viewer；多次打开/关闭无泄漏（Instruments/Allocations 观察）。","未开始","未开始","未开始","未提交","","plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:50;Mac/MainWindow/Detail/main_mac.js:22;Mac/MainWindow/Detail/DetailWebViewController.swift:89;Mac/MainWindow/Detail/DetailWebViewController.swift:261",""
"NNW-060","P1","6","frontend","图片查看器：缩放/拖拽/性能（丝滑）","在 viewer 中实现滚轮缩放、拖拽关闭/平移的双模式交互，并进行大图 downsample 与动画/渲染优化以保证低 CPU/内存。","滚轮可连续 Zoom in/out 并可回到 1x；未缩放时拖拽任意方向触发交互式关闭；缩放 > 1x 时拖拽转为平移（不触发关闭）；右上角 X 始终可关闭；大图（>10MB）可打开并平滑缩放/拖拽；Instruments 观察无持续内存增长且空闲 CPU 保持低；XcodebuildMcp（macOS）构建通过。","AUTOFRONTEND","缩放/平移逻辑需与 macOS 手势一致；避免滚轮事件与 scroll view 默认滚动冲突；downsample 在后台执行并可复用缓存。","回归：不同图片类型/尺寸/Retina 场景表现一致；无网络时可从缓存打开；连续打开多张图不抖动、不出现状态错乱。","未开始","未开始","未开始","未提交","","plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:57",""
"NNW-070","P1","7","backend","优化图片加载：并发合并与缓存策略","优化 Timeline 缩略图与 viewer 图片加载的并发/缓存，减少重复下载与解码阻塞，提升二次进入/滚动的体感速度。","同一 URL 的并发请求被合并（避免重复下载）；二次进入同一列表时缩略图命中内存/磁盘缓存并更快显示；支持取消与并发上限（避免抢占滚动交互）；缓存可按既有清理策略清除且清除后可重新下载；XcodebuildMcp（macOS）构建通过；尽可能新增/更新单测覆盖 coalescing/缓存命中。","AUTOSERVER","并发上限需合理且可维护；保持线程安全（ImageDownloader actor + queue）不被破坏；不引入网络层行为变化导致 304/etag 兼容问题。","回归：慢网/断网下不会导致 UI 卡顿或无限重试；badURLs 逻辑仍有效；Timeline/通知/头像/图标等其他图片下载不退化。","未开始","未开始","未开始","未提交","","plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:64;Shared/Images/ImageDownloader.swift:18;Mac/MainWindow/Timeline/Cell/TimelineTableCellView.swift:319",""
"NNW-080","P2","8","both","自定义快捷键动作（AI Summary/Translate）","在不破坏默认 plist shortcuts 的前提下，提供用户可配置的快捷键覆盖层，至少支持 AI Summary 与 AI Translate，并处理冲突与恢复默认。","Preferences 中可录制/编辑 AI Summary 与 AI Translate 快捷键；设置后立即生效且重启后仍生效；与既有 Timeline/Detail/Sidebar/Global shortcuts 冲突时有明确处理（阻止保存或可预测覆盖）；提供“恢复默认”；XcodebuildMcp（macOS）构建通过。","AUTOE2E","优先级规则需明确：UserDefaults 覆盖 > bundle plist；action selector string 仅允许白名单；避免系统保留键与输入法冲突；键盘事件处理不影响文本输入控件。","回归：无自定义配置时行为与当前一致；默认 plist shortcuts 仍可用；不同窗口焦点下快捷键触发正确；AI 未启用时触发动作给出一致的禁用提示（若适用）。","未开始","未开始","未开始","未提交","","plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:71;Mac/MainWindow/MainWindowController.swift:552;Mac/MainWindow/Keyboard/MainWindowKeyboardHandler.swift:12;Modules/RSCore/Sources/RSCore/AppKit/Keyboard.swift:33",""
"NNW-090","P1","9","both","构建/测试/回归/交付","在所有变更完成后执行构建验证、受影响测试与手工回归，并按 DEVELOPMENT_WORKFLOW.md 管理分支与提交。","XcodebuildMcp（macOS）build 通过；XcodebuildMcp 运行受影响 XCTest 通过；手工回归覆盖：Timeline 缩略图、Hover 翻译成功/失败/重试、启动自动刷新开关、图片 viewer 全交互、快捷键自定义与冲突；按 DEVELOPMENT_WORKFLOW.md 完成提交并在 CSV 中更新 git_state。","AUTOE2E","每个 Issue 完成后都需单独做一次 XcodebuildMcp 构建验证；重要交互变更提供 feature flag/降级路径；性能问题需记录 Instruments 结果并在 refs 指向审计文档。","回归全量：首次运行/升级运行；多账号；不同主题/暗色模式；长时间运行无泄漏；打 tag/推送前再次 build 验证。","未开始","未开始","未开始","未提交","","plan/2025-12-25_15-04-55-nnw-macos-fixes-features.md:78;DEVELOPMENT_WORKFLOW.md:5",""
